# EmoBitÂ·å¿†å®ˆ - é¡¹ç›®æ¶æ„æ–‡æ¡£

> åŸºäºæ—¶ç©ºæ™ºèƒ½ä¸æ•°å­—å­ªç”Ÿçš„è®¤çŸ¥éšœç¢ä»£å¿ç³»ç»Ÿ

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [æ ¸å¿ƒæ¨¡å—è¯´æ˜](#æ ¸å¿ƒæ¨¡å—è¯´æ˜)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [æ„å»ºå’Œè¿è¡Œ](#æ„å»ºå’Œè¿è¡Œ)
- [æ¶æ„è®¾è®¡æ¨¡å¼](#æ¶æ„è®¾è®¡æ¨¡å¼)
- [æ•°æ®æµå‘](#æ•°æ®æµå‘)
- [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)

---

## é¡¹ç›®æ¦‚è¿°

**EmoBitÂ·å¿†å®ˆ** æ˜¯ä¸€æ¬¾ä¸“ä¸ºè®¤çŸ¥éšœç¢è€å¹´äººè®¾è®¡çš„æ™ºèƒ½è¾…åŠ©åº”ç”¨ã€‚ç³»ç»Ÿé€šè¿‡**æ—¶ç©ºæ™ºèƒ½ï¼ˆSTIï¼‰**ã€**å¤šæ¨¡æ€è§†è§‰æ„ŸçŸ¥**å’Œ**3Dæ•°å­—å­ªç”Ÿ**æŠ€æœ¯ï¼Œä¸ºè€å¹´äººæä¾›å…¨å¤©å€™çš„"ä¼´éšå¼"å®ˆæŠ¤ã€‚

### æ ¸å¿ƒåŠŸèƒ½

1. **è€äººç«¯ï¼ˆElderï¼‰**
   - ğŸ  æ™ºèƒ½å¯¼èˆªï¼šARå®æ™¯å¯¼èˆªã€åœ°æ ‡è§¦å‘å¼è®°å¿†å”¤é†’
   - ğŸ’Š æœè¯ç®¡ç†ï¼šé—­ç¯è¡Œä¸ºéªŒè¯ã€æœè¯æé†’
   - ğŸ” å¯»ç‰©è¾…åŠ©ï¼šç‰©å“ä½ç½®è®°å½•ä¸å›æº¯
   - ğŸ’¬ AIèŠå¤©ï¼šæƒ…æ„Ÿé™ªä¼´ã€è®°å¿†å”¤é†’å¯¹è¯
   - ğŸ†˜ ç´§æ€¥æ±‚åŠ©ï¼šä¸€é”®æŠ¥è­¦åŠŸèƒ½

2. **å®¶å±ç«¯ï¼ˆFamilyï¼‰**
   - ğŸ“Š å¥åº·ç›‘æ§ï¼šå®æ—¶æŸ¥çœ‹è€äººå¥åº·æ•°æ®
   - ğŸ“ ä½ç½®è¿½è¸ªï¼šGPSè½¨è¿¹ã€å¼‚å¸¸è¡Œä¸ºé¢„è­¦
   - ğŸ“ˆ è®¤çŸ¥æŠ¥å‘Šï¼šç—…æƒ…è¿½è¸ªã€è¶‹åŠ¿åˆ†æ
   - ğŸ”” è­¦æŠ¥å†å²ï¼šæŸ¥çœ‹æ‰€æœ‰å¼‚å¸¸äº‹ä»¶è®°å½•

---

## æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     EmoBitÂ·å¿†å®ˆ åº”ç”¨æ¶æ„                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è¡¨ç°å±‚ (UI Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ è€äººç«¯ (Elder)â”‚        â”‚ å®¶å±ç«¯ (Family)â”‚                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â”‚ â€¢ Activities â”‚        â”‚ â€¢ Activities â”‚                   â”‚
â”‚  â”‚ â€¢ Fragments  â”‚        â”‚ â€¢ Fragments  â”‚                   â”‚
â”‚  â”‚ â€¢ Views      â”‚        â”‚ â€¢ Views      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â€¢ ViewModel (MVVM æ¨¡å¼)                                     â”‚
â”‚  â€¢ Use Cases (ç”¨ä¾‹)                                          â”‚
â”‚  â€¢ Repository (æ•°æ®ä»“åº“)                                     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚ (Data Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â€¢ Room Database (æœ¬åœ°æ•°æ®åº“)                                â”‚
â”‚  â€¢ DataStore (åå¥½è®¾ç½®)                                      â”‚
â”‚  â€¢ Remote API (è¿œç¨‹æ¥å£ - å¾…å®ç°)                            â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è®¾å¤‡èƒ½åŠ›å±‚ (Capability Layer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â€¢ Location Services (GPSå®šä½)                               â”‚
â”‚  â€¢ CameraX (ç›¸æœº)                                            â”‚
â”‚  â€¢ ML Kit (OCRã€å§¿æ€æ£€æµ‹)                                    â”‚
â”‚  â€¢ Sensor APIs (ä¼ æ„Ÿå™¨)                                      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶æ„æ¨¡å¼

- **MVVM (Model-View-ViewModel)**ï¼šé‡‡ç”¨ Android å®˜æ–¹æ¨èçš„ MVVM æ¶æ„æ¨¡å¼
- **ä¾èµ–æ³¨å…¥**ï¼šä½¿ç”¨ Hilt å®ç°ä¾èµ–æ³¨å…¥ï¼Œæé«˜ä»£ç å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§
- **å• Activity å¤š Fragment**ï¼šé€šè¿‡ Navigation Component å®ç°é¡µé¢å¯¼èˆª

---

## é¡¹ç›®ç»“æ„

```
EmoBit/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/com/emobit/yishou/
â”‚   â”‚   â”‚   â”œâ”€â”€ EmoBitApplication.kt          # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â”‚   â”‚   â””â”€â”€ ui/                           # UI å±‚
â”‚   â”‚   â”‚       â”œâ”€â”€ common/                   # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ RoleSelectorActivity.kt  # è§’è‰²é€‰æ‹©é¡µé¢
â”‚   â”‚   â”‚       â”œâ”€â”€ elder/                    # è€äººç«¯
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderMainActivity.kt     # ä¸»Activity
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderHomeFragment.kt     # é¦–é¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderNavigationFragment.kt  # å¯¼èˆªé¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderMedicationFragment.kt  # æœè¯é¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderChatFragment.kt       # èŠå¤©é¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderFindItemFragment.kt   # å¯»ç‰©é¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderMemoryFragment.kt     # è®°å¿†å”¤é†’é¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ElderSettingsFragment.kt   # è®¾ç½®é¡µ
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ARNavigationActivity.kt    # ARå¯¼èˆª
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ EmergencyActivity.kt       # ç´§æ€¥æ±‚åŠ©
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ MedicationVerifyActivity.kt # æœè¯éªŒè¯
â”‚   â”‚   â”‚       â””â”€â”€ family/                   # å®¶å±ç«¯
â”‚   â”‚   â”‚           â”œâ”€â”€ FamilyMainActivity.kt      # ä¸»Activity
â”‚   â”‚   â”‚           â”œâ”€â”€ FamilyDashboardFragment.kt # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚           â”œâ”€â”€ FamilyLocationFragment.kt  # ä½ç½®è¿½è¸ª
â”‚   â”‚   â”‚           â”œâ”€â”€ FamilyReportsFragment.kt   # è®¤çŸ¥æŠ¥å‘Š
â”‚   â”‚   â”‚           â”œâ”€â”€ FamilyAlertsFragment.kt    # è­¦æŠ¥å†å²
â”‚   â”‚   â”‚           â””â”€â”€ FamilySettingsFragment.kt  # è®¾ç½®é¡µ
â”‚   â”‚   â””â”€â”€ res/                              # èµ„æºæ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ layout/                       # å¸ƒå±€æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ navigation/                   # å¯¼èˆªå›¾
â”‚   â”‚       â”‚   â”œâ”€â”€ nav_elder.xml            # è€äººç«¯å¯¼èˆª
â”‚   â”‚       â”‚   â””â”€â”€ nav_family.xml           # å®¶å±ç«¯å¯¼èˆª
â”‚   â”‚       â”œâ”€â”€ menu/                         # èœå•æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ values/                       # å€¼èµ„æº
â”‚   â”‚       â”‚   â”œâ”€â”€ colors.xml               # é¢œè‰²
â”‚   â”‚       â”‚   â”œâ”€â”€ strings.xml              # å­—ç¬¦ä¸²
â”‚   â”‚       â”‚   â”œâ”€â”€ dimens.xml               # å°ºå¯¸
â”‚   â”‚       â”‚   â””â”€â”€ themes.xml               # ä¸»é¢˜
â”‚   â”‚       â””â”€â”€ drawable/                     #  drawableèµ„æº
â”‚   â”œâ”€â”€ build.gradle.kts                      # æ¨¡å—æ„å»ºé…ç½®
â”‚   â””â”€â”€ proguard-rules.pro                    # æ··æ·†è§„åˆ™
â”œâ”€â”€ build.gradle.kts                          # é¡¹ç›®æ„å»ºé…ç½®
â”œâ”€â”€ settings.gradle.kts                       # é¡¹ç›®è®¾ç½®
â”œâ”€â”€ gradle.properties                         # Gradleå±æ€§
â””â”€â”€ gradle/wrapper/                           # GradleåŒ…è£…å™¨
```

---

## æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. åº”ç”¨ç¨‹åºå…¥å£ (`EmoBitApplication.kt`)

**èŒè´£**ï¼š
- åˆå§‹åŒ– Hilt ä¾èµ–æ³¨å…¥å®¹å™¨
- æä¾›å…¨å±€ Application å®ä¾‹

**å…³é”®æ³¨è§£**ï¼š
- `@HiltAndroidApp`ï¼šæ ‡è®°ä¸º Hilt åº”ç”¨ç¨‹åºå…¥å£

### 2. è§’è‰²é€‰æ‹©æ¨¡å— (`RoleSelectorActivity`)

**åŠŸèƒ½**ï¼š
- åº”ç”¨å¯åŠ¨åé¦–å…ˆæ˜¾ç¤ºçš„é¡µé¢
- ç”¨æˆ·é€‰æ‹©è¿›å…¥"è€äººç«¯"æˆ–"å®¶å±ç«¯"
- ä½¿ç”¨ Splash Screen API å®ç°å¯åŠ¨åŠ¨ç”»

**å¯¼èˆªæµç¨‹**ï¼š
```
RoleSelectorActivity
    â”œâ”€> ElderMainActivity (è€äººç«¯)
    â””â”€> FamilyMainActivity (å®¶å±ç«¯)
```

### 3. è€äººç«¯æ¨¡å— (`ui/elder/`)

#### 3.1 ä¸»å®¹å™¨ (`ElderMainActivity`)

**åŠŸèƒ½**ï¼š
- åŒ…å«åº•éƒ¨å¯¼èˆªæ  (`BottomNavigationView`)
- æ‰˜ç®¡ `NavHostFragment` ä½œä¸º Fragment å®¹å™¨
- æä¾›å…¨å±€åŠŸèƒ½å…¥å£ï¼ˆè®¾ç½®ã€ç´§æ€¥æ±‚åŠ©ï¼‰

**åº•éƒ¨å¯¼èˆªæ **ï¼š
- ğŸ  é¦–é¡µ (`elderHomeFragment`)
- ğŸ§­ å¯¼èˆª (`elderNavigationFragment`)
- ğŸ’Š æœè¯ (`elderMedicationFragment`)
- ğŸ’¬ èŠå¤© (`elderChatFragment`)

#### 3.2 é¦–é¡µ (`ElderHomeFragment`)

**åŠŸèƒ½**ï¼š
- å±•ç¤º 3D æ•°å­—äººï¼ˆå ä½ï¼‰
- æ˜¾ç¤ºå¥åº·çŠ¶æ€å¡ç‰‡ï¼ˆå¿ƒç‡ã€è¡€æ°§ã€æ­¥æ•°ã€ç¡çœ ï¼‰
- å¿«æ·æ“ä½œå…¥å£ï¼š
  - å›å®¶å¯¼èˆª
  - æœè¯æé†’
  - æ‰¾ä¸œè¥¿
  - å¿†å¾€æ˜”

#### 3.3 å¯¼èˆªé¡µé¢ (`ElderNavigationFragment`)

**åŠŸèƒ½**ï¼š
- å¸¸ç”¨åœ°ç‚¹åˆ—è¡¨ï¼ˆå®¶ã€èœå¸‚åœºã€å…¬å›­ï¼‰
- AR å®æ™¯å¯¼èˆªå…¥å£
- ç‚¹å‡»åœ°ç‚¹åå¯åŠ¨ `ARNavigationActivity`

**å¯¼èˆªæµç¨‹**ï¼š
```
ElderNavigationFragment
    â””â”€> ARNavigationActivity (å…¨å±ARå¯¼èˆª)
```

#### 3.4 æœè¯ç®¡ç† (`ElderMedicationFragment`)

**åŠŸèƒ½**ï¼š
- å¾…æœè¯åˆ—è¡¨
- æœè¯æé†’è®¾ç½®
- å¯åŠ¨æœè¯éªŒè¯ (`MedicationVerifyActivity`)

**æœè¯éªŒè¯æµç¨‹**ï¼š
```
ElderMedicationFragment
    â””â”€> MedicationVerifyActivity
        â”œâ”€ CameraX æ‰«æè¯ç›’ (OCRè¯†åˆ«)
        â”œâ”€ åŠ¨ä½œæ£€æµ‹ (IMUä¼ æ„Ÿå™¨)
        â””â”€ çŠ¶æ€æœºåˆ¤å®š (å®Œæˆé—­ç¯)
```

#### 3.5 å…¶ä»– Fragment

- **`ElderChatFragment`**ï¼šAI èŠå¤©å¯¹è¯ç•Œé¢
- **`ElderFindItemFragment`**ï¼šå¯»ç‰©åŠŸèƒ½ï¼Œå±•ç¤ºç‰©å“ä½ç½®
- **`ElderMemoryFragment`**ï¼šè®°å¿†å”¤é†’ï¼Œæ˜¾ç¤ºå†å²ç…§ç‰‡å’Œæ•…äº‹
- **`ElderSettingsFragment`**ï¼šè®¾ç½®é¡µé¢

#### 3.6 å…¨å± Activity

- **`ARNavigationActivity`**ï¼šAR å®æ™¯å¯¼èˆªï¼ˆå¾…å®ç° AR åŠŸèƒ½ï¼‰
- **`EmergencyActivity`**ï¼šç´§æ€¥æ±‚åŠ©é¡µé¢ï¼Œä¸€é”®æŠ¥è­¦

### 4. å®¶å±ç«¯æ¨¡å— (`ui/family/`)

#### 4.1 ä¸»å®¹å™¨ (`FamilyMainActivity`)

**ç»“æ„**ï¼šä¸è€äººç«¯ç±»ä¼¼ï¼ŒåŒ…å«åº•éƒ¨å¯¼èˆªæ å’Œ Fragment å®¹å™¨

**åº•éƒ¨å¯¼èˆªæ **ï¼š
- ğŸ“Š ä»ªè¡¨ç›˜ (`familyDashboardFragment`)
- ğŸ“ ä½ç½® (`familyLocationFragment`)
- ğŸ“ˆ æŠ¥å‘Š (`familyReportsFragment`)
- ğŸ”” è­¦æŠ¥ (`familyAlertsFragment`)

#### 4.2 å„åŠŸèƒ½ Fragment

- **`FamilyDashboardFragment`**ï¼šå¥åº·æ•°æ®æ¦‚è§ˆã€å®æ—¶çŠ¶æ€
- **`FamilyLocationFragment`**ï¼šGPS è½¨è¿¹åœ°å›¾ã€å®æ—¶ä½ç½®
- **`FamilyReportsFragment`**ï¼šè®¤çŸ¥åŠŸèƒ½è¯„åˆ†è¶‹åŠ¿å›¾
- **`FamilyAlertsFragment`**ï¼šå¼‚å¸¸äº‹ä»¶å†å²è®°å½•
- **`FamilySettingsFragment`**ï¼šè®¾ç½®é¡µé¢

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Kotlin** | - | ä¸»è¦ç¼–ç¨‹è¯­è¨€ |
| **Android SDK** | API 26-34 | ç›®æ ‡å¹³å° |
| **Gradle** | 8.7 | æ„å»ºå·¥å…· |
| **Android Gradle Plugin** | 8.5.2 | Android æ„å»ºæ’ä»¶ |

### UI æ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Material Design 3** | 1.11.0 | Material Design ç»„ä»¶åº“ |
| **Navigation Component** | 2.7.6 | é¡µé¢å¯¼èˆªç®¡ç† |
| **ViewBinding** | - | ç±»å‹å®‰å…¨çš„è§†å›¾ç»‘å®š |
| **DataBinding** | - | æ•°æ®ç»‘å®šæ”¯æŒ |
| **Splash Screen API** | 1.0.1 | å¯åŠ¨å±å¹• |

### æ¶æ„ç»„ä»¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Hilt** | 2.51.1 | ä¾èµ–æ³¨å…¥æ¡†æ¶ |
| **ViewModel** | 2.7.0 | MVVM æ¶æ„æ”¯æŒ |
| **LiveData** | 2.7.0 | å“åº”å¼æ•°æ® |
| **Lifecycle** | 2.7.0 | ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ |

### å¼‚æ­¥å¤„ç†

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Coroutines** | 1.7.3 | Kotlin åç¨‹ |
| **Flow** | - | å“åº”å¼æ•°æ®æµ |

### æ•°æ®å­˜å‚¨

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Room** | 2.6.1 | æœ¬åœ°æ•°æ®åº“ |
| **DataStore** | 1.0.0 | åå¥½è®¾ç½®å­˜å‚¨ |

### å›¾åƒä¸åª’ä½“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Glide** | 4.16.0 | å›¾ç‰‡åŠ è½½ |
| **CameraX** | 1.3.1 | ç›¸æœº API |
| **Lottie** | 6.3.0 | åŠ¨ç”»åº“ |

### AI/ML

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **ML Kit OCR** | 16.0.0 | ä¸­æ–‡æ–‡å­—è¯†åˆ« |
| **ML Kit Pose Detection** | 18.0.0-beta3 | å§¿æ€æ£€æµ‹ |

### ä½ç½®æœåŠ¡

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Google Maps** | 18.2.0 | åœ°å›¾æ˜¾ç¤º |
| **Location Services** | 21.1.0 | GPS å®šä½ |

### ä»£ç ç”Ÿæˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **KSP** | 2.0.10-1.0.24 | Kotlin ç¬¦å·å¤„ç†ï¼ˆæ›¿ä»£ Kaptï¼‰ |

---

## æ„å»ºå’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- **JDK**: 17+
- **Android Studio**: Hedgehog (2023.1.1) æˆ–æ›´é«˜ç‰ˆæœ¬
- **Android SDK**: API 26-34
- **Gradle**: 8.7

### æ„å»ºæ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd EmoBit
   ```

2. **é…ç½® API Key**
   
   åœ¨ `app/src/main/AndroidManifest.xml` ä¸­é…ç½® Google Maps API Keyï¼š
   ```xml
   <meta-data
       android:name="com.google.android.geo.API_KEY"
       android:value="YOUR_API_KEY_HERE" />
   ```

3. **åŒæ­¥ Gradle**
   
   åœ¨ Android Studio ä¸­ï¼š
   - File â†’ Sync Project with Gradle Files

4. **è¿è¡Œåº”ç”¨**
   
   è¿æ¥è®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œç‚¹å‡» Run æŒ‰é’®ï¼ˆæˆ– `Ctrl+R` / `Cmd+R`ï¼‰

### å¸¸è§é—®é¢˜

**Q: æ„å»ºå¤±è´¥ï¼Œæç¤º KSP æ’ä»¶æœªæ‰¾åˆ°ï¼Ÿ**  
A: æ£€æŸ¥ `build.gradle.kts` ä¸­çš„ KSP ç‰ˆæœ¬æ˜¯å¦ä¸ Kotlin ç‰ˆæœ¬å…¼å®¹ã€‚

**Q: æ— æ³•è·å–ä½ç½®ä¿¡æ¯ï¼Ÿ**  
A: ç¡®ä¿åœ¨è®¾å¤‡ä¸Šæˆäºˆä½ç½®æƒé™ï¼Œå¹¶åœ¨ `AndroidManifest.xml` ä¸­å·²å£°æ˜ç›¸å…³æƒé™ã€‚

**Q: AR å¯¼èˆªåŠŸèƒ½æ— æ³•ä½¿ç”¨ï¼Ÿ**  
A: AR åŠŸèƒ½ç›®å‰ä¸ºå ä½å®ç°ï¼Œéœ€è¦é›†æˆ ARCore æˆ–å…¶ä»– AR æ¡†æ¶ã€‚

---

## æ¶æ„è®¾è®¡æ¨¡å¼

### 1. MVVM æ¨¡å¼

```
View (Fragment/Activity)
    â†“ è§‚å¯Ÿ
ViewModel
    â†“ è°ƒç”¨
Repository
    â†“ ä½¿ç”¨
DataSource (Room/API)
```

**ç¤ºä¾‹**ï¼š
```kotlin
// Fragment ä¸­
viewModel.healthData.observe(viewLifecycleOwner) { data ->
    // æ›´æ–° UI
}

// ViewModel ä¸­
class ElderHomeViewModel @Inject constructor(
    private val repository: HealthRepository
) : ViewModel() {
    val healthData: LiveData<HealthData> = repository.getHealthData()
}
```

### 2. ä¾èµ–æ³¨å…¥ (Hilt)

**Application çº§åˆ«**ï¼š
```kotlin
@HiltAndroidApp
class EmoBitApplication : Application()
```

**Activity/Fragment çº§åˆ«**ï¼š
```kotlin
@AndroidEntryPoint
class ElderMainActivity : AppCompatActivity()
```

**æä¾›ä¾èµ–**ï¼š
```kotlin
@Module
@InstallIn(SingletonComponent::class)
object AppModule {
    @Provides
    @Singleton
    fun provideHealthRepository(): HealthRepository {
        return HealthRepositoryImpl()
    }
}
```

### 3. å• Activity å¤š Fragment

- ä½¿ç”¨ **Navigation Component** ç®¡ç†é¡µé¢å¯¼èˆª
- æ¯ä¸ªç«¯ï¼ˆè€äººç«¯/å®¶å±ç«¯ï¼‰åªæœ‰ä¸€ä¸ªä¸» Activity
- æ‰€æœ‰åŠŸèƒ½é¡µé¢éƒ½æ˜¯ Fragmentï¼Œé€šè¿‡å¯¼èˆªå›¾ (`nav_*.xml`) ç®¡ç†

**ä¼˜åŠ¿**ï¼š
- æ›´å¥½çš„çŠ¶æ€ç®¡ç†
- æ›´æµç•…çš„é¡µé¢åˆ‡æ¢
- ç»Ÿä¸€çš„è¿”å›æ ˆç®¡ç†

### 4. Repository æ¨¡å¼

**æ•°æ®ä»“åº“å±‚**ï¼š
```kotlin
interface HealthRepository {
    suspend fun getHealthData(): Flow<HealthData>
    suspend fun saveHealthData(data: HealthData)
}

class HealthRepositoryImpl @Inject constructor(
    private val localDataSource: LocalDataSource,
    private val remoteDataSource: RemoteDataSource
) : HealthRepository {
    // å®ç°æ•°æ®è·å–å’Œä¿å­˜é€»è¾‘
}
```

---

## æ•°æ®æµå‘

### è€äººç«¯æ•°æ®æµç¤ºä¾‹

```
ç”¨æˆ·ç‚¹å‡»"å›å®¶å¯¼èˆª"
    â†“
ElderHomeFragment.cardNavigation.clickListener
    â†“
findNavController().navigate(R.id.elderNavigationFragment)
    â†“
Navigation Component åˆ‡æ¢ Fragment
    â†“
ElderNavigationFragment.onViewCreated()
    â†“
ç”¨æˆ·ç‚¹å‡»"å›å®¶"å¡ç‰‡
    â†“
ElderNavigationFragment.startARNavigation("home")
    â†“
å¯åŠ¨ ARNavigationActivity (Intent)
    â†“
ARNavigationActivity è·å–ç›®çš„åœ°ä¿¡æ¯
    â†“
è°ƒç”¨ LocationService è·å–å½“å‰ä½ç½®
    â†“
è®¡ç®—å¯¼èˆªè·¯çº¿
    â†“
æ¸²æŸ“ AR å¯¼èˆªç•Œé¢
```

### æ•°æ®å­˜å‚¨æµç¨‹

```
ç”¨æˆ·æ“ä½œ
    â†“
ViewModel å¤„ç†ä¸šåŠ¡é€»è¾‘
    â†“
è°ƒç”¨ Repository
    â†“
Repository å†³å®šæ•°æ®æºï¼ˆæœ¬åœ°/è¿œç¨‹ï¼‰
    â†“
LocalDataSource (Room)
    â”œâ”€> å†™å…¥æ•°æ®åº“
    â””â”€> è¿”å› Flow<T>
RemoteDataSource (API)
    â”œâ”€> ç½‘ç»œè¯·æ±‚
    â””â”€> ç¼“å­˜åˆ°æœ¬åœ°
    â†“
Flow æ›´æ–°åˆ° ViewModel
    â†“
LiveData é€šçŸ¥ View
    â†“
UI æ›´æ–°
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

1. **å‘½åè§„èŒƒ**ï¼š
   - Activity: `XxxActivity`
   - Fragment: `XxxFragment`
   - ViewModel: `XxxViewModel`
   - Repository: `XxxRepository`
   - å¸ƒå±€æ–‡ä»¶: `activity_xxx.xml` / `fragment_xxx.xml`

2. **åŒ…ç»“æ„**ï¼š
   ```
   com.emobit.yishou
   â”œâ”€â”€ ui/              # UI å±‚
   â”œâ”€â”€ data/            # æ•°æ®å±‚ï¼ˆå¾…å®ç°ï¼‰
   â”œâ”€â”€ domain/          # ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆå¾…å®ç°ï¼‰
   â””â”€â”€ di/              # ä¾èµ–æ³¨å…¥ï¼ˆå¾…å®ç°ï¼‰
   ```

3. **èµ„æºå‘½å**ï¼š
   - é¢œè‰²: `color_primary`, `color_text_primary`
   - å­—ç¬¦ä¸²: `app_name`, `nav_home`
   - å°ºå¯¸: `spacing_lg`, `radius_elder`

### Git æäº¤è§„èŒƒ

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ›´æ–°æ–‡æ¡£
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„ä»£ç 
test: æ·»åŠ æµ‹è¯•
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### æ³¨æ„äº‹é¡¹

1. **å†…å­˜ç®¡ç†**ï¼š
   - Fragment ä¸­åŠæ—¶æ¸…ç† `_binding`ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
   - ä½¿ç”¨ `viewLifecycleOwner` è€Œé `this` è§‚å¯Ÿ LiveData

2. **çº¿ç¨‹å®‰å…¨**ï¼š
   - UI æ“ä½œå¿…é¡»åœ¨ä¸»çº¿ç¨‹
   - æ•°æ®åº“æ“ä½œä½¿ç”¨åç¨‹çš„ `Dispatchers.IO`

3. **æƒé™å¤„ç†**ï¼š
   - è¿è¡Œæ—¶æƒé™ä½¿ç”¨ `ActivityResultContracts`
   - åœ¨ AndroidManifest.xml ä¸­å£°æ˜æ‰€æœ‰éœ€è¦çš„æƒé™

---

## æœªæ¥æ‰©å±•

### å¾…å®ç°åŠŸèƒ½

1. **æ•°æ®å±‚**ï¼š
   - å®Œæ•´çš„ Repository å®ç°
   - Room æ•°æ®åº“å®ä½“å’Œ DAO
   - è¿œç¨‹ API æ¥å£

2. **ä¸šåŠ¡é€»è¾‘**ï¼š
   - ViewModel å®ç°
   - Use Casesï¼ˆç”¨ä¾‹ï¼‰
   - çŠ¶æ€ç®¡ç†

3. **AI åŠŸèƒ½**ï¼š
   - AR å¯¼èˆªå®ç°ï¼ˆARCoreï¼‰
   - è¯­éŸ³è¯†åˆ«ä¸åˆæˆ
   - AIGC å›¾åƒç”Ÿæˆ
   - è‡ªç„¶è¯­è¨€å¤„ç†

4. **è®¾å¤‡é›†æˆ**ï¼š
   - OPPO Watch å¥åº·æ•°æ®æ¥å…¥
   - ä¼ æ„Ÿå™¨æ•°æ®èåˆ
   - è·Œå€’æ£€æµ‹ç®—æ³•

5. **äº‘æœåŠ¡**ï¼š
   - æ•°æ®åŒæ­¥
   - æ¨é€é€šçŸ¥
   - äº‘ç«¯å­˜å‚¨

---

## å‚è€ƒèµ„æ–™

- [Android å®˜æ–¹æ–‡æ¡£](https://developer.android.com/)
- [Material Design 3](https://m3.material.io/)
- [Hilt æ–‡æ¡£](https://dagger.dev/hilt/)
- [Navigation Component](https://developer.android.com/guide/navigation)
- [Room æ•°æ®åº“](https://developer.android.com/training/data-storage/room)

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**æœ€åæ›´æ–°**: 2026-01-20
